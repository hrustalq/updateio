# Discord Бот

## Обзор
Discord бот отвечает за мониторинг игровых каналов Discord на предмет объявлений об обновлениях и передачу этой информации в систему UpdateIO.

## Технический Стек
- **Фреймворк**: discord.js
- **API Коммуникация**: REST API
- **Типизация**: TypeScript + Zod
- **Очередь сообщений**: Kafka

## Основные Обязанности

### Обнаружение Обновлений
- Мониторинг настроенных каналов Discord
- Парсинг объявлений об обновлениях
- Извлечение релевантной информации:
  - Название игры
  - Версия обновления
  - Содержание обновления/список изменений
  - Временная метка релиза

### Обработка Сообщений
- Фильтрация релевантных сообщений
- Парсинг содержимого сообщений
- Извлечение структурированных данных
- Валидация информации об обновлениях

### Распространение Обновлений
- Создание стандартизированных сообщений об обновлениях
- Отправка обновлений в очередь Kafka
- Обработка подтверждений доставки
- Отслеживание статуса сообщений

### Управление Каналами
- Поддержка списка отслеживаемых каналов
- Обработка прав доступа к каналам
- Отслеживание статуса каналов
- Управление конфигурациями каналов

## Функциональность

### Парсинг Сообщений
- Интеллектуальное извлечение содержимого
- Поддержка различных форматов сообщений
- Обработка встроенного контента
- Обработка вложений

### Распознавание Игр
- Сопоставление названий игр
- Извлечение номеров версий
- Классификация типов обновлений
- Идентификация провайдеров

### Обработка Ошибок
- Логика повторных попыток подключения
- Резервные механизмы парсинга
- Отчетность об ошибках
- Мониторинг состояния

## Точки Интеграции

### Исходящие
- Очередь сообщений Kafka
- API сервис
- Системы мониторинга

### Входящие
- Discord WebSocket API
- Конфигурации каналов
- Сопоставления игр
- Шаблоны обновлений

## Конфигурация
- Сопоставление каналов
- Шаблоны распознавания игр
- Форматы обновлений
- Настройки мониторинга

## Развертывание
- Контейнеризация через Docker
- Stateless дизайн
- Горизонтальное масштабирование
- Настройка высокой доступности 